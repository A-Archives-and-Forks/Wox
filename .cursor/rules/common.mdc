---
description: 
globs: 
alwaysApply: true
---
* 你在回答问题的时候请使用中文回答我, 但是代码中的注释必须使用英文
* 当你需要查看日志的时候,请使用 `tail -n 100 ~/.wox/log/log` 查看最新日志, 帮助你排查问题


# 项目结构

├── LICENSE
├── Makefile
├── README.md
├── Wox.code-workspace
├── assets
│   ├── app.ico
│   ├── app.png
│   ├── app.psd
│   └── mac
│       ├── Info.plist
│       └── app.icns
├── ci
│   ├── go.mod
│   ├── go.sum
│   └── plugin.go
├── docs
│   ├── Plugin.json.md
│   ├── _sidebar.md
│   ├── action_panel.md
│   ├── ai_settings.md
│   ├── ai_theme.md
│   ├── architecture.md
│   ├── clip_query.md
│   ├── contributing.md
│   ├── deep_link.md
│   ├── development.md
│   ├── faq.md
│   ├── images
│   │   ├── ai_auto_git_msg.png
│   │   ├── ai_auto_git_msg_setting.png
│   │   ├── ai_setting.png
│   │   ├── ai_theme.jpg
│   │   ├── app.png
│   │   └── popclip.png
│   ├── index.html
│   ├── install.md
│   ├── plugin_ai_command.md
│   ├── plugin_store.md
│   ├── plugin_summary.md
│   ├── query.md
│   ├── query_for_dev.md
│   ├── query_hotkeys.md
│   ├── query_shortcuts.md
│   ├── selection_query.md
│   ├── uninstall.md
│   └── usecase_auto_write_git_commit_msg.md
├── git-commit.mdc
├── release
│   └── wox-mac-arm64
├── store-ai-command.json
├── store-plugin.json
├── store-theme.json
├── updater.json
├── wox.core
│   ├── Makefile
│   ├── ai
│   │   ├── mcp.go
│   │   ├── provider.go
│   │   ├── provider_google.go
│   │   ├── provider_groq.go
│   │   ├── provider_ollama.go
│   │   └── provider_openai.go
│   ├── common
│   │   ├── README.md
│   │   ├── ai.go
│   │   ├── image.go
│   │   ├── image_test.go
│   │   ├── theme.go
│   │   └── ui.go
│   ├── go.mod
│   ├── go.sum
│   ├── i18n
│   │   ├── lang.go
│   │   └── manager.go
│   ├── main.go
│   ├── main_test.go
│   ├── plugin
│   │   ├── api.go
│   │   ├── cache
│   │   │   └── images
│   │   │       └── emoji_1f6ab.png
│   │   ├── doctor.go
│   │   ├── host
│   │   │   ├── host_nodejs.go
│   │   │   ├── host_python.go
│   │   │   ├── host_websocket.go
│   │   │   ├── host_websocket_plugin.go
│   │   │   └── jsonrpc.go
│   │   ├── host.go
│   │   ├── icons.go
│   │   ├── instance.go
│   │   ├── manager.go
│   │   ├── manager_test.go
│   │   ├── metadata.go
│   │   ├── os.go
│   │   ├── platform.go
│   │   ├── plugin.go
│   │   ├── preview.go
│   │   ├── query.go
│   │   ├── query_test.go
│   │   ├── refresh.go
│   │   ├── runtime.go
│   │   ├── store.go
│   │   └── system
│   │       ├── ai_command.go
│   │       ├── ai_command_test.go
│   │       ├── app
│   │       │   ├── app.go
│   │       │   ├── app_darwin.go
│   │       │   ├── app_darwin.m
│   │       │   ├── app_darwin_test.go
│   │       │   ├── app_icons_darwin.go
│   │       │   ├── app_linux.go
│   │       │   ├── app_windows.go
│   │       │   └── retriever.go
│   │       ├── backup.go
│   │       ├── browser.go
│   │       ├── browser_bookmark.go
│   │       ├── calculator
│   │       │   ├── README.md
│   │       │   ├── calculator.go
│   │       │   ├── calculator_plugin.go
│   │       │   ├── parser.go
│   │       │   └── tokenizer.go
│   │       ├── chat.go
│   │       ├── clipboard.go
│   │       ├── converter
│   │       │   ├── converter.go
│   │       │   ├── core
│   │       │   │   ├── registry.go
│   │       │   │   └── tokenizer.go
│   │       │   └── modules
│   │       │       ├── base_regex_module.go
│   │       │       ├── crypto.go
│   │       │       ├── crypto_test.go
│   │       │       ├── currency.go
│   │       │       ├── currency_test.go
│   │       │       └── time.go
│   │       ├── doctor.go
│   │       ├── file
│   │       │   ├── plugin.go
│   │       │   ├── searcher.go
│   │       │   ├── searcher_darwin.go
│   │       │   ├── searcher_everything_sdk_windows.go
│   │       │   ├── searcher_linux.go
│   │       │   └── searcher_windows.go
│   │       ├── indicator.go
│   │       ├── menus_darwin.go
│   │       ├── plugin_installer.go
│   │       ├── query_history.go
│   │       ├── selection.go
│   │       ├── sys.go
│   │       ├── theme.go
│   │       ├── url.go
│   │       ├── url_test.go
│   │       ├── util.go
│   │       ├── websearch.go
│   │       └── wpm.go
│   ├── resource
│   │   ├── app.ico
│   │   ├── app.png
│   │   ├── lang
│   │   │   ├── en_US.json
│   │   │   ├── pt_BR.json
│   │   │   ├── ru_RU.json
│   │   │   └── zh_CN.json
│   │   ├── others
│   │   │   └── Everything64.dll
│   │   ├── resource.go
│   │   └── ui
│   │       └── themes
│   │           ├── dark.json
│   │           ├── light.json
│   │           ├── macaroon delight.json
│   │           ├── morandi dream.json
│   │           └── rococo dream.json
│   ├── rsrc_windows.syso
│   ├── setting
│   │   ├── backup_restore.go
│   │   ├── definition
│   │   │   ├── definition.go
│   │   │   ├── definition_checkbox.go
│   │   │   ├── definition_dynamic.go
│   │   │   ├── definition_head.go
│   │   │   ├── definition_label.go
│   │   │   ├── definition_newline.go
│   │   │   ├── definition_select.go
│   │   │   ├── definition_select_ai_model.go
│   │   │   ├── definition_table.go
│   │   │   └── definition_textbox.go
│   │   ├── manager.go
│   │   ├── platform_setting_value.go
│   │   ├── plugin_setting.go
│   │   ├── plugin_setting_test.go
│   │   ├── validator
│   │   │   ├── validator.go
│   │   │   ├── validator_is_number.go
│   │   │   └── validator_not_empty.go
│   │   ├── wox_app_data.go
│   │   └── wox_setting.go
│   ├── ui
│   │   ├── dto
│   │   │   ├── plugin_dto.go
│   │   │   ├── setting_dto.go
│   │   │   └── theme_dto.go
│   │   ├── http.go
│   │   ├── manager.go
│   │   ├── position.go
│   │   ├── router.go
│   │   ├── store.go
│   │   └── ui_impl.go
│   ├── updater
│   │   ├── updater.go
│   │   └── version.go
│   └── util
│       ├── airdrop
│       │   ├── airdrop.go
│       │   ├── airdrop_darwin.go
│       │   └── airdrop_darwin.m
│       ├── autostart
│       │   ├── autostart.go
│       │   ├── autostart_darwin.go
│       │   ├── autostart_linux.go
│       │   └── autostart_windows.go
│       ├── clipboard
│       │   ├── clipboad_test.go
│       │   ├── clipboard.go
│       │   ├── clipboard_darwin.go
│       │   ├── clipboard_darwin.m
│       │   ├── clipboard_linux.go
│       │   └── clipboard_windows.go
│       ├── context.go
│       ├── debounce.go
│       ├── deeplink.go
│       ├── dev.go
│       ├── directory.go
│       ├── file.go
│       ├── file_darwin.go
│       ├── file_linux.go
│       ├── file_watcher.go
│       ├── file_windows.go
│       ├── goid.go
│       ├── goroutine.go
│       ├── hashmap.go
│       ├── hotkey
│       │   ├── hotkey.go
│       │   ├── hotkey_darwin.go
│       │   ├── hotkey_double.go
│       │   ├── hotkey_linux.go
│       │   └── hotkey_windows.go
│       ├── http.go
│       ├── ime
│       │   ├── ime_darwin.go
│       │   ├── ime_darwin.m
│       │   ├── ime_linux.go
│       │   └── ime_windows.go
│       ├── keyboard
│       │   ├── keyboard.go
│       │   ├── keyboard_darwin.go
│       │   ├── keyboard_linux.go
│       │   └── keyboard_windows.go
│       ├── location.go
│       ├── log.go
│       ├── lumberjack.go
│       ├── math.go
│       ├── md5.go
│       ├── menus
│       │   ├── menus_darwin.go
│       │   └── menus_darwin.m
│       ├── net.go
│       ├── notifier
│       │   ├── notify.go
│       │   ├── notify_darwin.go
│       │   ├── notify_darwin.m
│       │   ├── notify_linux.go
│       │   ├── notify_windows.c
│       │   └── notify_windows.go
│       ├── os.go
│       ├── permission
│       │   ├── permission_darwin.go
│       │   ├── permission_linux.go
│       │   └── permission_windows.go
│       ├── pinyin.go
│       ├── pinyin_dict.go
│       ├── regex.go
│       ├── screen
│       │   ├── screen.go
│       │   ├── screen_darwin.go
│       │   ├── screen_darwin.m
│       │   ├── screen_linux.go
│       │   └── screen_windows.go
│       ├── selection
│       │   ├── selection.go
│       │   ├── selection_darwin.go
│       │   ├── selection_darwin.m
│       │   └── selection_other.go
│       ├── shell
│       │   ├── shell_darwin.go
│       │   ├── shell_linux.go
│       │   └── shell_windows.go
│       ├── strings.go
│       ├── strings_test.go
│       ├── time.go
│       ├── tray
│       │   ├── tray.go
│       │   ├── tray_darwin.go
│       │   ├── tray_darwin.m
│       │   ├── tray_linux.c
│       │   ├── tray_linux.go
│       │   ├── tray_windows.c
│       │   └── tray_windows.go
│       ├── websocket_client.go
│       ├── window
│       │   ├── window.go
│       │   ├── window_darwin.go
│       │   ├── window_darwin.m
│       │   ├── window_linux.go
│       │   ├── window_windows.c
│       │   └── window_windows.go
│       └── zip.go
├── wox.plugin.host.nodejs
│   ├── Makefile
│   ├── README.md
│   ├── package.json
│   ├── pnpm-lock.yaml
│   ├── src
│   │   ├── index.ts
│   │   ├── jsonrpc.ts
│   │   ├── logger.ts
│   │   ├── pluginAPI.ts
│   │   ├── trace.ts
│   │   └── types.ts
│   └── tsconfig.json
├── wox.plugin.host.python
│   ├── Makefile
│   ├── README.md
│   ├── pyproject.toml
│   ├── src
│   │   └── wox_plugin_host
│   │       ├── __init__.py
│   │       ├── __main__.py
│   │       ├── constants.py
│   │       ├── host.py
│   │       ├── jsonrpc.py
│   │       ├── logger.py
│   │       ├── plugin_api.py
│   │       └── plugin_manager.py
│   └── uv.lock
├── wox.plugin.nodejs
│   ├── Makefile
│   ├── README.md
│   ├── package.json
│   ├── pnpm-lock.yaml
│   ├── src
│   │   ├── context.ts
│   │   ├── image.ts
│   │   └── index.ts
│   ├── tsconfig.json
│   └── types
│       ├── ai.d.ts
│       ├── index.d.ts
│       └── setting.d.ts
├── wox.plugin.python
│   ├── Makefile
│   ├── README.md
│   ├── pyproject.toml
│   ├── src
│   │   └── wox_plugin
│   │       ├── __init__.py
│   │       ├── api.py
│   │       ├── models
│   │       │   ├── ai.py
│   │       │   ├── context.py
│   │       │   ├── image.py
│   │       │   ├── preview.py
│   │       │   ├── query.py
│   │       │   └── result.py
│   │       ├── plugin.py
│   │       └── py.typed
│   └── uv.lock
└── wox.ui.flutter
    ├── macos
    │   └── Runner
    │       └── AppDelegate.swift
    └── wox
        ├── Makefile
        ├── README.md
        ├── analysis_options.yaml
        ├── assets
        │   └── fonts
        │       └── SF-Pro-Display-Regular.otf
        ├── lib
        │   ├── api
        │   │   └── wox_api.dart
        │   ├── components
        │   │   ├── plugin
        │   │   │   ├── wox_setting_plugin_checkbox_view.dart
        │   │   │   ├── wox_setting_plugin_head_view.dart
        │   │   │   ├── wox_setting_plugin_item_view.dart
        │   │   │   ├── wox_setting_plugin_label_view.dart
        │   │   │   ├── wox_setting_plugin_newline_view.dart
        │   │   │   ├── wox_setting_plugin_select_ai_model_view.dart
        │   │   │   ├── wox_setting_plugin_select_view.dart
        │   │   │   ├── wox_setting_plugin_table_update_view.dart
        │   │   │   ├── wox_setting_plugin_table_view.dart
        │   │   │   └── wox_setting_plugin_textbox_view.dart
        │   │   ├── wox_ai_model_selector_view.dart
        │   │   ├── wox_drag_move_view.dart
        │   │   ├── wox_hotkey_recorder_view.dart
        │   │   ├── wox_hotkey_view.dart
        │   │   ├── wox_image_view.dart
        │   │   ├── wox_list_item_view.dart
        │   │   ├── wox_preview_chat_view.dart
        │   │   ├── wox_preview_view.dart
        │   │   ├── wox_theme_icon_view.dart
        │   │   ├── wox_theme_preview.dart
        │   │   └── wox_tooltip_view.dart
        │   ├── entity
        │   │   ├── setting
        │   │   │   ├── wox_plugin_setting_checkbox.dart
        │   │   │   ├── wox_plugin_setting_head.dart
        │   │   │   ├── wox_plugin_setting_label.dart
        │   │   │   ├── wox_plugin_setting_newline.dart
        │   │   │   ├── wox_plugin_setting_select.dart
        │   │   │   ├── wox_plugin_setting_select_ai_model.dart
        │   │   │   ├── wox_plugin_setting_table.dart
        │   │   │   └── wox_plugin_setting_textbox.dart
        │   │   ├── validator
        │   │   │   ├── wox_setting_validator.dart
        │   │   │   ├── wox_setting_validator_is_number.dart
        │   │   │   └── wox_setting_validator_not_empty.dart
        │   │   ├── wox_ai.dart
        │   │   ├── wox_backup.dart
        │   │   ├── wox_double_hotkey.dart
        │   │   ├── wox_hotkey.dart
        │   │   ├── wox_image.dart
        │   │   ├── wox_lang.dart
        │   │   ├── wox_plugin.dart
        │   │   ├── wox_plugin_setting.dart
        │   │   ├── wox_preview.dart
        │   │   ├── wox_query.dart
        │   │   ├── wox_response.dart
        │   │   ├── wox_setting.dart
        │   │   ├── wox_theme.dart
        │   │   ├── wox_toolbar.dart
        │   │   └── wox_websocket_msg.dart
        │   ├── enums
        │   │   ├── wox_actions_type_enum.dart
        │   │   ├── wox_ai_conversation_role_enum.dart
        │   │   ├── wox_direction_enum.dart
        │   │   ├── wox_event_device_type_enum.dart
        │   │   ├── wox_image_type_enum.dart
        │   │   ├── wox_last_query_mode_enum.dart
        │   │   ├── wox_list_view_type_enum.dart
        │   │   ├── wox_msg_method_enum.dart
        │   │   ├── wox_msg_type_enum.dart
        │   │   ├── wox_position_type_enum.dart
        │   │   ├── wox_preview_scroll_position_enum.dart
        │   │   ├── wox_preview_type_enum.dart
        │   │   ├── wox_query_type_enum.dart
        │   │   ├── wox_result_tail_type_enum.dart
        │   │   └── wox_selection_type_enum.dart
        │   ├── main.dart
        │   ├── modules
        │   │   ├── launcher
        │   │   │   ├── views
        │   │   │   │   ├── wox_launcher_view.dart
        │   │   │   │   ├── wox_query_box_view.dart
        │   │   │   │   ├── wox_query_result_view.dart
        │   │   │   │   └── wox_query_toolbar_view.dart
        │   │   │   └── wox_launcher_controller.dart
        │   │   └── setting
        │   │       ├── views
        │   │       │   ├── wox_setting_ai_view.dart
        │   │       │   ├── wox_setting_base.dart
        │   │       │   ├── wox_setting_data_view.dart
        │   │       │   ├── wox_setting_general_view.dart
        │   │       │   ├── wox_setting_network_view.dart
        │   │       │   ├── wox_setting_plugin_view.dart
        │   │       │   ├── wox_setting_theme_view.dart
        │   │       │   ├── wox_setting_ui_view.dart
        │   │       │   └── wox_setting_view.dart
        │   │       └── wox_setting_controller.dart
        │   └── utils
        │       ├── colors.dart
        │       ├── consts.dart
        │       ├── entity_factory.dart
        │       ├── env.dart
        │       ├── heartbeat_checker.dart
        │       ├── log.dart
        │       ├── picker.dart
        │       ├── strings.dart
        │       ├── windows
        │       │   ├── base_window_manager.dart
        │       │   ├── linux_window_manager.dart
        │       │   ├── macos_window_manager.dart
        │       │   ├── window_manager.dart
        │       │   ├── window_manager_interface.dart
        │       │   └── windows_window_manager.dart
        │       ├── wox_http_util.dart
        │       ├── wox_setting_util.dart
        │       ├── wox_theme_util.dart
        │       └── wox_websocket_msg_util.dart
        ├── linux
        │   ├── CMakeLists.txt
        │   ├── flutter
        │   │   ├── CMakeLists.txt
        │   │   ├── generated_plugin_registrant.cc
        │   │   ├── generated_plugin_registrant.h
        │   │   └── generated_plugins.cmake
        │   └── runner
        │       ├── CMakeLists.txt
        │       ├── main.cc
        │       ├── my_application.cc
        │       └── my_application.h
        ├── macos
        │   ├── Flutter
        │   │   ├── Flutter-Debug.xcconfig
        │   │   ├── Flutter-Release.xcconfig
        │   │   └── GeneratedPluginRegistrant.swift
        │   ├── Podfile
        │   ├── Podfile.lock
        │   ├── Runner
        │   │   ├── AppDelegate.swift
        │   │   ├── Assets.xcassets
        │   │   │   └── AppIcon.appiconset
        │   │   │       ├── Contents.json
        │   │   │       ├── app_icon_1024.png
        │   │   │       ├── app_icon_128.png
        │   │   │       ├── app_icon_16.png
        │   │   │       ├── app_icon_256.png
        │   │   │       ├── app_icon_32.png
        │   │   │       ├── app_icon_512.png
        │   │   │       └── app_icon_64.png
        │   │   ├── Base.lproj
        │   │   │   └── MainMenu.xib
        │   │   ├── Configs
        │   │   │   ├── AppInfo.xcconfig
        │   │   │   ├── Debug.xcconfig
        │   │   │   ├── Release.xcconfig
        │   │   │   └── Warnings.xcconfig
        │   │   ├── DebugProfile.entitlements
        │   │   ├── Info.plist
        │   │   ├── MainFlutterWindow.swift
        │   │   └── Release.entitlements
        │   ├── Runner.xcodeproj
        │   │   ├── project.pbxproj
        │   │   ├── project.xcworkspace
        │   │   │   └── xcshareddata
        │   │   │       ├── IDEWorkspaceChecks.plist
        │   │   │       └── swiftpm
        │   │   │           └── configuration
        │   │   └── xcshareddata
        │   │       └── xcschemes
        │   │           └── Runner.xcscheme
        │   ├── Runner.xcworkspace
        │   │   ├── contents.xcworkspacedata
        │   │   └── xcshareddata
        │   │       ├── IDEWorkspaceChecks.plist
        │   │       └── swiftpm
        │   │           └── configuration
        │   └── RunnerTests
        │       └── RunnerTests.swift
        ├── pubspec.lock
        ├── pubspec.yaml
        ├── windows
        │   ├── CMakeLists.txt
        │   ├── flutter
        │   │   ├── CMakeLists.txt
        │   │   ├── generated_plugin_registrant.cc
        │   │   ├── generated_plugin_registrant.h
        │   │   └── generated_plugins.cmake
        │   └── runner
        │       ├── CMakeLists.txt
        │       ├── Runner.rc
        │       ├── flutter_window.cpp
        │       ├── flutter_window.h
        │       ├── main.cpp
        │       ├── resource.h
        │       ├── resources
        │       │   └── app_icon.ico
        │       ├── runner.exe.manifest
        │       ├── utils.cpp
        │       ├── utils.h
        │       ├── win32_window.cpp
        │       └── win32_window.h
        └── wox
            └── lib
                └── components

# 项目结构说明

wox.core                    Go实现的Wox后端,通过websocket与http与wox.ui.flutter通信
    wox.core/setting        wox.core的设置相关定义
    wox.core/plugin         wox.core的API定义与实现
wox.plugin.python           python插件需要引用的类库
wox.plugin.host.python      python插件的host,通过websocket与wox.core通信,负责加载python插件
wox.plugin.nodejs           nodejs插件需要引用的类库
wox.plugin.host.nodejs      nodejs插件的host,通过websocket与wox.core通信,负责加载nodejs插件
wox.ui.flutter               flutter实现的Wox前端,通过websocket与wox.core通信